{% extends 'base.html' %}
{% block content %}

<div class="card">
    <h2><i class="fas fa-users"></i> Add New Tenant</h2>
    <p style="color:#6b7280;font-size:0.9rem;margin-bottom:16px;">
        Fill tenant details. System will auto-generate login: <strong>Username = Room No</strong>,
        <strong>Password = name@123 (without space)</strong>.
    </p>
    <form method="post">
        {% csrf_token %}
        <input type="hidden" name="add_tenant" value="1">

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
            <div class="form-group">
                <label>Name</label>
                <input type="text" name="name" required>
            </div>
            <div class="form-group">
                <label>Room No</label>
                <input type="text" name="room_no" required>
            </div>
        </div>

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
            <div class="form-group">
                <label>Aadhar No</label>
                <input type="text" name="aadhar_no" maxlength="12" required>
            </div>
            <div class="form-group">
                <label>Joining Date</label>
                <input type="date" name="joining_date" required>
            </div>
        </div>

        <div class="form-group">
            <label>Address</label>
            <textarea name="address" rows="3" required></textarea>
        </div>

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
            <div class="form-group">
                <label>Mobile 1</label>
                <input type="tel" name="mobile1" required>
            </div>
            <div class="form-group">
                <label>Mobile 2</label>
                <input type="tel" name="mobile2">
            </div>
        </div>

        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:20px;">
            <div class="form-group">
                <label>Base Rent (₹)</label>
                <input type="number" step="0.01" name="base_rent" required>
            </div>
            <div class="form-group">
                <label>Unit Rate (₹/unit)</label>
                <input type="number" step="0.01" name="unit_rate" required>
            </div>
            <div class="form-group">
                <label>Advance (₹)</label>
                <input type="number" step="0.01" name="advance" value="0">
            </div>
            <div class="form-group">
                <label>Open Unit</label>
                <input type="number" name="open_unit" value="0">
            </div>
        </div>

        <button type="submit" class="btn btn-success">
            <i class="fas fa-user-plus"></i> Create Tenant
        </button>
    </form>
</div>

<div class="card">
    <h2><i class="fas fa-list"></i> Your Tenants ({{ tenants.count }})</h2>
    <table>
        <tr>
            <th>Name</th>
            <th>Room</th>
            <th>Mobile</th>
            <th>Rent</th>
            <th>Unit Rate</th>
            <th>Advance</th>
            <th>Action</th>
        </tr>
        {% for tenant in tenants %}
        <tr>
            <td>{{ tenant.name }}</td>
            <td><strong>{{ tenant.room_no }}</strong></td>
            <td>{{ tenant.mobile1 }}</td>
            <td>₹{{ tenant.base_rent }}</td>
            <td>₹{{ tenant.unit_rate }}/unit</td>
            <td>₹{{ tenant.advance }}</td>
            <td>
                <a href="{% url 'owner_tenant_detail' tenant.id %}" class="btn">View</a>
            </td>
            
        </tr>
        {% empty %}
        <tr>
            <td colspan="7" style="text-align:center;color:#9ca3af;">No tenants added yet.</td>
        </tr>
        {% endfor %}
    </table>
</div>

{% endblock %}
